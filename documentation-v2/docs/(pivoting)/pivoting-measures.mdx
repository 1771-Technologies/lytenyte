---
title: Measures
pro: true
step: Aggregate and summarize row data when pivoting.
description: A measure is an aggregation dimension used to summarize data when row
  and column pivots are applied to the grid.
---

To create a measure, define a custom function that receives an array of [leaf rows](/docs/row-overview)
and a [field value](/docs/column-field), and returns a summarized value. The summarized value can
be any type, but it is typically a number.

:::note

You should be familiar with row aggregations before reading this guide. If you have not already,
see the [Client Row Aggregations guide](/docs/client-source-aggregations) for more details.

:::

## Measures

Define a measure by setting the `measure` property on the pivot model. LyteNyte Grid uses a measure
for two purposes:

1. Aggregate row data based on the row pivot and column pivot dimensions.
2. If the measure dimension is a column, use it as a reference for the
   columns created from the pivot configuration.

The demo below shows a measure that aggregates the **Profit** column. The grid is
row-pivoted on the **Country** column and column-pivoted on the **Age Group** column.

You can interpret this view as a profit breakdown per country, split by age group.

::demo[Profit Measure="./demos/pivot-measures"]

The code below shows how to apply the measure. This demo uses a predefined measure function called
`"sum"`, but you can also provide a function inline if that better suits your application's
use case.

```ts
//!next 4
const aggSum: Grid.T.Aggregator<GridSpec["data"]> = (field, data) => {
  const values = data.map((x) => computeField<number>(field, x));
  return sum(values);
};

const ds = useClientDataSource<GridSpec>({
  data: salesData,
  pivotMode: true,
  pivotModel: {
    columns: [{ id: "ageGroup" }],
    rows: [{ id: "country" }],
    //!next 6
    measures: [
      {
        dim: { id: "profit", name: "Profit", type: "number", cellRenderer: ProfitCell, width: 120 },
        fn: "sum",
      },
    ],
  },
  aggregateFns: { sum: aggSum },
});
```

### Multiple Measures

You can apply multiple measures to the pivot configuration by providing additional dimensions.
The order of measures does not affect aggregation behavior, but it does influence the initial
column order when pivots are applied.

The demo below demonstrates multiple measures in action. You can also update the measure function
by clicking the function name in the pill and selecting a different measure for that column.

::demo[Multiple Measures="./demos/pivot-measures-updates"]

Each measure results in additional columns being created. If a column pivot creates
20 dynamic columns, each measure adds 20 columns. For example, two measures produce
40 columns, three measures produce 60 columns, and so on.

## Single Column Multiple Measures

You can use the same column as a measure more than once. This allows you to apply different
measure functions to the same column.

The demo below measures the **Profit** column using both **sum** and **avg**.
From LyteNyte Grid's perspective, each measure is distinct even though both reference
the same column.

::demo[Single Column Multiple Measures="./demos/pivot-measures-multiple"]

LyteNyte Grid identifies measures by `id`. When you apply multiple measures to the same column,
you must provide a unique ID for each measure. The example below shows how to configure this:

```ts
const ds = useClientDataSource<GridSpec>({
  pivotModel: {
    columns: [{ id: "ageGroup" }],
    rows: [{ id: "country" }],
    measures: [
      {
        dim: {
          ...columns.find((x) => x.id === "profit")!,
          id: "Profit (sum)", //!
          field: "profit",
          name: "Profit (sum)",
          width: 100,
        },
        fn: "sum",
      },
      {
        dim: {
          ...columns.find((x) => x.id === "profit")!,
          id: "Profit (avg)", //!
          field: "profit",
          name: "Profit (avg)",
          width: 100,
        },
        fn: "avg",
      },
    ],
  },
  aggregateFns: { sum: aggSum, avg: aggAvg },
});
```

## Next Steps

::next[/docs/pivoting-columns-and-rows]
::next[/docs/pivoting-grand-totals]
::next[/docs/pivoting-sorting]
