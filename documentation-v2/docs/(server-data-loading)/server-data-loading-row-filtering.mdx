---
title: Server Row Filtering
pro: true
step: Filter server-side rows using the server data source.
description: Send a custom filter model to the server to filter rows before returning them to the client.
---

:::note

This guide covers filtering for the server row data source. For details,
see Filtering, starting with [Filter Text](/docs/filtering-text).

:::

## Filtering Rows

To filter rows on the server, define a filter model and include it in each data request.
The `useServerDataSource` hook accepts a `queryKey` array. When any value in the array
changes, the server data source resets and fetches new rows.

Include the filter model in the `queryKey` dependency array. The data source passes the `queryKey`
value to the `queryFn`. The `queryFn` then sends the filter model to the server, which applies the filter
before returning the data.

The following demo passes a custom filter model to the `queryKey` property. Click the funnel
icon in the column header to apply a filter.

::demo[Server Filtering="./demos/filtered-server-data"]

To send the filter model to the server, add it to the `queryKey` as shown below.
The server then evaluates the filter model and returns only the matching rows.

```ts
export type FilterStringOperator = "equals" | "not_equals" | "less_than" | "greater_than" | "contains";

export interface FilterString {
  readonly operator: FilterStringOperator;
  readonly value: string;
  readonly kind: "text";
}

export type FilterDateOperator = "before" | "after";

export interface FilterDate {
  readonly operator: FilterDateOperator;
  readonly value: string;
  readonly kind: "date";
}

export type GridFilter = FilterString | FilterDate;
```

To send the filter model to the server, the code adds it to the `queryKey`. The example below
demonstrates this approach. The server evaluates the filter model and removes rows that do
not match the filter criteria.

```ts
//!next
const [filters, setFilters] = useState<Record<string, GridFilter>>({});

const ds = useServerDataSource({
  queryFn: (params) => Server(params.requests, params.queryKey[0]),
  queryKey: [filters] as const, //!
  blockSize: 50,
});
```

This is just one approach to server-side filtering. We recommend aligning your client-side
filter model with your existing server format to maintain consistency.

## Next Steps

::next[/docs/server-data-loading-row-grouping-and-aggregation]
::next[/docs/server-data-loading-row-sorting]
::next[/docs/server-data-loading-optimistic-loading]
