---
title: Grid API
description: LyteNyte Grid's API provides useful methods to query grid state and
  makes many grid operations much easier.
---

:::note

In general, avoid using API methods in the render path of a React component.
To prevent state issues, use API methods in callbacks or effects unless you have
an advanced understanding of how state flows within the grid.

:::

## Getting the API

LyteNyte Grid provides the API as a prop to all renderers and event callbacks
exposed by the grid. If you need to use the API in other parts of your application,
provide the grid with a `ref` prop to access the API directly.

```tsx
const apiRef = useRef();

return <Grid ref={apiRef} />;
```

## Extending the API

You can extend the LyteNyte Grid API with custom properties. The code below shows a basic example.
See the [API Extension guide](/docs/grid-api-extensions) for more details. By extending the API,
you can add additional capabilities to the grid to make integration with your application much easier.

```tsx
interface GridSpec {
  readonly api: { notify: () => void };
}

type MyExtendedAPI = Grid.API<GridSpec>=

function MyGrid() {
  const apiExtension = useMemo(() => {
    return {
      notify: () => {
        // Do something
      }
    }
  }, [])

  return <Grid apiExtension={apiExtension} />
}
```

## Properties

The properties listed below are grouped into sections, but they are all available on the same API
instance.

:::note

LyteNyte Grid's API is further extended by the row source provided to the grid. In addition to the
properties listed below, the row source properties are also available on the API instance.
See the [Row Source reference](/docs/reference/row-source) for more details.

:::

### Grid

<TypeTable 
  type={[
    {
      name: "positionFromElement",
      description: `Returns a description of the grid position that contains the given element. The returned position is a union
      type that indicates whether the element is in a cell, header cell, header group cell, detail area, or full width row.
      Returns null if the element does not belong to a valid grid position.

      Only use this method in advanced scenarios, such as implementing a custom navigation system in LyteNyte Grid.
      To perform actions on specific grid elements, prefer attaching event listeners through the \`events\` grid prop.`,
      type: `(el: HTMLElement) => PositionUnion | null`,
      pro: true,
      see: ["/docs/keyboard"]
    },
    {
      name: "cellSelections",
      description: `Returns the current cell selection data rectangles in the grid.`,
      type: `() => DataRect[]`,
      pro: true,
      see: ["/docs/cell-selection"]
    },
    {
      name: "xPositions$",
      description: `A Piece object that provides access to the column x positions and allows reactive subscriptions.
      The x positions represent the starting pixel coordinate of each column relative to the viewport.`,
      type: `Piece<Uint32Array>`,
    },
    {
      name: "yPositions$",
      description: `A Piece object that provides access to the row y positions and allows reactive subscriptions.
      The y positions represent the starting pixel coordinate of each row relative to the viewport.`,
      type: `Piece<Uint32Array>`,
    },
    {
      name: "viewport$",
      description: `A Piece object that provides access to the grid viewport element and allows reactive subscriptions
      to viewport element changes.`,
      type: `Piece<HTMLElement | null>`
    },
    {
      name: "cellRoot",
      description: `Returns the root cell position for a given row and column index. When a cell spans multiple rows
      or columns, it occupies more than a single position. Use this method to retrieve the root position of a
      spanning cell for any row and column index it covers.

      If the grid does not use cell spanning, this method always returns the provided position.`,
      type: "(row: number, column: number) => PositionGridCell | PositionFullWidthRow | null"
    },
    {
      name: "exportData",
      description: `Returns the cell data for a given cell selection rectangle. If no rectangle is provided, this method
      returns all cell data in the grid.`,
      type: "(params: { rect: DataRect }) => Promise<ExportDataRectResult>",
      see: ["/docs/export-overview"]
    },
    {
      name: "scrollIntoView",
      description: "Scrolls the specified row or column into view. This method does nothing if the row or column is already visible.",
      type: "(params) => void"
    },
    {
      name: "viewport",
      description: `Returns the viewport HTML element of the grid. Prefer using the \`viewport$\` property.`,
      type: "() => HTMLElement | null"
    },

]}
/>

### Columns

<TypeTable
  type={[
    {
      name: "columnById",
      description: `Returns the column definition for the given ID. Returns \`null\` if the column is not found.`,
      type: "(id: string) => Column | null",
      see: ["/docs/columns"],
    },
    {
      name: "columnByIndex",
      description: `Returns the column definition for the given column index. Returns \`null\` if the column index is out of bounds.`,
      type: "(index: number) => Column | null",
      see: ["/docs/columns"],
    },
    {
      name: "columnField",
      description: `Returns the cell value for a given column and row using the column \`field\` property.`,
      type: "(colOrId: string | WithId, row: RowNode) => unknown",
      see: ["/docs/column-field"],
    },
    {
      name: "columnMove",
      description: `Reorders columns in the grid. This method calls the \`onColumnsChange\` event with the reordered columns.`,
      type: "(params) => void",
      see: ["/docs/column-move"],
    },
    {
      name: "columnResize",
      description: `Resizes columns in the grid. This method calls the \`onColumnsChange\` event with the resized columns.`,
      type: "(sizes: Record<string, number>) => void",
      see: ["/docs/column-resizing"],
    },
    {
      name: "columnAutosize",
      description: `Automatically sizes some or all columns in the grid. You can call this method with a dry run option to get the expected column sizes.`,
      type: "(params) => Record<string, number>",
      see: ["/docs/column-autosizing"],
    },
    {
      name: "columnUpdate",
      description: `Updates the definition of one or more columns. This method calls the \`onColumnsChange\` event with the updated columns.
      Use this method to update properties provided through column extensions.`,
      type: "(updates: Record<string, ColumnPartial>) => void",
      see: ["/docs/columns"],
    },
    {
      name: "columnToggleGroup",
      description: `Toggles the expansion state of a column group. If the \`state\` parameter is provided, this method applies that state directly.`,
      type: "(group: string | string[], state?: boolean) => void",
      see: ["/docs/column-groups"],
    },
    {
      name: "columnView",
      description: `Returns a column view object, which is a description of the current visible column configuration.`,
      type: "() => ColumnView",
      see: ["/docs/columns"],
    },
  ]}
/>

### Rows

<TypeTable
  type={[
    {
      name: "rowDetailHeight",
      description: `Returns the rendered height of the row detail area for the given row. Use this method when the
      \`rowDetailHeight\` property on the grid is set to "auto" and you need to query the detail area height.`,
      type: "(row: WithId | string) => string",
      see: ["/docs/row-detail"],
    },
    {
      name: "rowDetailExpanded",
      description: "Returns the current row detail expansion state for a given row.",
      type: `(row: RowNode | string | number) => boolean`,
      see: ["/docs/row-detail"],
    },
    {
      name: "rowDetailToggle",
      description: `Toggles the row detail expansion state for a given row. If \`state\` is provided, this method applies
      the given state directly.`,
      type: `(row: RowNode | string, state?: boolean) => void`,
      see: ["/docs/row-detail"],
    },
    {
      name: "rowGroupToggle",
      description: `Toggles the expansion state of a row group. If \`state\` is provided, this method applies the
      given state directly.`,
      type: `(row: string | RowNode, state?: boolean) => void`,
      see: ["/docs/client-source-row-grouping"],
    },
    {
      name: "rowIsLeaf",
      description: `A type guard method that checks whether the given row is a leaf row.`,
      type: "(row: RowNode) => row is RowLeaf",
      see: ["/docs/row-overview"],
    },
    {
      name: "rowIsGroup",
      description: `A type guard method that checks whether the given row is a group row.`,
      type: "(row: RowNode) => row is RowGroup",
      see: ["/docs/row-overview"],
    },
    {
      name: "rowIsAggregated",
      description: `A type guard method that checks whether the given row is an aggregated row.`,
      type: "(row: RowNode) => row is RowAggregated",
      see: ["/docs/row-overview"],
    },
    {
      name: "rowIsExpanded",
      description: `Checks whether the given row is expanded. Always returns \`false\` if the row is not a group row.`,
      type: "(row: RowNode) => boolean",
      see: ["/docs/client-source-row-grouping"],
    },
    {
      name: "rowIsExpandable",
      description: `Checks whether the given row is expandable. Always returns \`false\` if the row is not a group row.`,
      type: "(row: RowNode) => boolean",
      see: ["/docs/client-source-row-grouping"],
    },
    {
      name: "rowView",
      description: `Returns a description of the current row view.`,
      type: "() => RowView",
    },
    {
      name: "rowSelect",
      description: `Selects a row, all rows, or all rows between two rows. If \`deselect\` is set, this method deselects instead.`,
      type: "(params) => void",
      see: ["/docs/row-selection"],
    },
    {
      name: "rowHandleSelect",
      description: `Handles a row selection event. Use this method to allow custom components to manage row selection.`,
      type: "(params) => void",
      see: ["/docs/row-selection"],
    },
    {
      name: "useRowDrag",
      description: `A hook that returns a set of props that you can apply to an element to enable row dragging.`,
      type: `(params) => DragProperties`,
      see: ["/docs/row-dragging"],
    },
    {
      name: "props",
      description: "Returns the props provided to the grid.",
      type: `() => Grid.Props`,
    },
  ]}
/>

### Cell Editing

<TypeTable
  type={[
    {
      name: "editBegin",
      description: `Begins a cell edit at the given position. Calling this method starts editing programmatically
      in the same way as when a user triggers an edit.`,
      type: "(params) => void",
      see: ["/docs/cell-editing"],
    },
    {
      name: "editEnd",
      description: `Ends the active cell edit, optionally cancelling it.`,
      type: `(cancel?: boolean) => void`,
      see: ["/docs/cell-editing"],
    },
    {
      name: "editIsCellActive",
      description: `Checks whether the given position is currently being edited.`,
      type: `(params) => boolean`,
      see: ["/docs/cell-editing"],
    },
    {
      name: "editUpdateRows",
      description: `Updates rows in bulk. Every row is put through the normal edit validation process before the update.
      Returns \`true\` if the update succeeds. Otherwise, this method returns a map containing failure reasons per row.`,
      type: "(rows: Map<string | number, unknown>) => true | Map<string | number, boolean | Record<string, unknown>>",
      see: ["/docs/cell-editing", "/docs/cell-editing-bulk-editing"],
    },
    {
      name: "editUpdateCells",
      description: `Updates cells in bulk. Every cell is put through the normal edit validation process before the update.
      Returns \`true\` if the update succeeds. Otherwise, this method returns a map containing failure reasons per row.`,
      type: "(rows: Map<string | number, Update[]>) => true | Map<string | number, boolean | Record<string, unknown>>",
      see: ["/docs/cell-editing", "/docs/cell-editing-bulk-editing"],
    },
  ]}
/>
