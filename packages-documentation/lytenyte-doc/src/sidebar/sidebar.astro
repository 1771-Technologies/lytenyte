---
import type { Root } from "./types";

interface Props {
  readonly collection: string;
  readonly item: Root["children"][number];
}
import Tree from "./sidebar.astro";
import { getEntry } from "astro:content";

const { item, collection } = Astro.props;

let title = "";
if (item?.kind === "page-link") {
  const entry = await getEntry(collection, item.id);
  title = entry.data.title;
}
---

{item?.kind === "direct-link" && <a href={item.id}>{item.label}</a>}
{item?.kind === "external-link" && <a href={item.href}>{item.label}</a>}
{item?.kind === "page-link" && <a href={item.id}>{title}</a>}
{item?.kind === "separator" && <div>Separator</div>}
{
  item?.kind === "group" && (
    <div>
      <div>{item.label}</div>
      <div class="flex flex-col gap-2">
        {item.children!.map((x) => (
          <Tree item={x} collection={collection} />
        ))}
      </div>
    </div>
  )
}
